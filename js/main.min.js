function getWikiData(a,i){"use strict";var t="https://en.wikipedia.org/w/api.php?action=query&prop=extracts&format=json&exintro=&titles=";$.ajax({url:t+arrayLocations[a].name,jsonp:"callback",dataType:"jsonp",timeout:1e4,success:function(t){var e=Object.keys(t.query.pages)[0];arrayLocations[a].wikiData=t.query.pages[e].extract,i()},error:function(){arrayLocations[a].wikiData="There was an error retrieving wiki data.",console.log("Error retrieving wiki data."),i()}})}function initMarker(a){"use strict";var i=new google.maps.Marker({position:arrayLocations[a].mapLoc,map:map,title:arrayLocations[a].name,animation:google.maps.Animation.DROP});arrayMarkers.push(i),i.addListener("click",function(){infowindow.setContent(arrayLocations[a].wikiData),infowindow.open(map,i),i.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){i.setAnimation(null)},750)})}function initMap(){"use strict";map=new google.maps.Map(document.getElementById("map"),{center:{lat:34.0914,lng:-118.293},zoom:11,disableDefaultUI:!0}),infowindow=new google.maps.InfoWindow({content:"No data set yet."});for(var a=0;a<arrayLocations.length;a++)initMarker(a)}function displayInfo(a){"use strict";for(var i,t=0;t<arrayLocations.length;t++)if(arrayLocations[t].name===a.name){i=t;break}getWikiData(i,function(){for(infowindow.setContent(arrayLocations[t].wikiData),t=0;t<arrayMarkers.length;t++)if(arrayMarkers[t].title===a.name){infowindow.open(map,arrayMarkers[t]),arrayMarkers[t].setAnimation(google.maps.Animation.BOUNCE);break}setTimeout(function(){arrayMarkers[t].setAnimation(null)},750)})}function AppViewModel(){"use strict";this.allLocations=ko.observableArray(arrayLocations),this.searchTerm=ko.observable(""),this.filteredLocations=ko.computed(function(){return this.allLocations().filter(function(a){return a.name.toLowerCase().indexOf(this.searchTerm().toLowerCase())>-1},this)},this),this.filteredLocations.subscribe(function(){for(var a=0;a<arrayMarkers.length;a++){for(var i=!1,t=0;t<this.filteredLocations().length;t++)if(arrayMarkers[a].title===this.filteredLocations()[t].name){i=!0;break}i?arrayMarkers[a].setVisible(!0):arrayMarkers[a].setVisible(!1)}},this)}var arrayLocations=[{name:"Dodger Stadium",wikiData:"",mapLoc:{lat:34.074,lng:-118.24}},{name:"Walt Disney Concert Hall",wikiData:"",mapLoc:{lat:34.055,lng:-118.25}},{name:"Staples Center",wikiData:"",mapLoc:{lat:34.043,lng:-118.267}},{name:"La Brea Tar Pits",wikiData:"",mapLoc:{lat:34.063,lng:-118.356}},{name:"Bradbury Building",wikiData:"",mapLoc:{lat:34.051,lng:-118.248}},{name:"Hollywood Sign",wikiData:"",mapLoc:{lat:34.134,lng:-118.321}}],infowindow,map,arrayMarkers=[];ko.applyBindings(new AppViewModel),window.addEventListener("load",initMap);