function getWikiData(a,t){"use strict";var i="https://en.wikipedia.org/w/api.php?action=query&prop=extracts&format=json&exintro=&titles=";$.ajax({url:i+arrayLocations[a].name,jsonp:"callback",dataType:"jsonp",timeout:1e4,success:function(i){var e=Object.keys(i.query.pages)[0];arrayLocations[a].wikiData=i.query.pages[e].extract,t()},error:function(){arrayLocations[a].wikiData="There was an error retrieving wiki data.",console.log("Error retrieving wiki data."),t()}})}function initMarker(a){"use strict";var t=new google.maps.Marker({position:arrayLocations[a].mapLoc,map:map,title:arrayLocations[a].name,animation:google.maps.Animation.DROP});arrayMarkers.push(t),t.addListener("click",function(){getWikiData(a,function(){infowindow.setContent(arrayLocations[a].wikiData),infowindow.open(map,t),t.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){t.setAnimation(null)},750)})})}function initMap(){"use strict";map=new google.maps.Map(document.getElementById("map"),{center:{lat:34.0914,lng:-118.293},zoom:11,disableDefaultUI:!0}),infowindow=new google.maps.InfoWindow({content:"No data set yet.",maxWidth:1e3});for(var a=0;a<arrayLocations.length;a++)initMarker(a)}function displayInfo(a){"use strict";for(var t=0;t<arrayLocations.length&&arrayLocations[t].name!==a.name;t++);getWikiData(t,function(){for(infowindow.setContent(arrayLocations[t].wikiData),t=0;t<arrayMarkers.length;t++)if(arrayMarkers[t].title===a.name){infowindow.open(map,arrayMarkers[t]),arrayMarkers[t].setAnimation(google.maps.Animation.BOUNCE);break}setTimeout(function(){arrayMarkers[t].setAnimation(null)},750)})}function AppViewModel(){"use strict";this.allLocations=ko.observableArray(arrayLocations),this.searchTerm=ko.observable(""),this.filteredLocations=ko.computed(function(){return this.allLocations().filter(function(a){return a.name.toLowerCase().indexOf(this.searchTerm().toLowerCase())>-1},this)},this),this.filteredLocations.subscribe(function(){for(var a=0;a<arrayMarkers.length;a++){for(var t=!1,i=0;i<this.filteredLocations().length;i++)if(arrayMarkers[a].title===this.filteredLocations()[i].name){t=!0;break}t?arrayMarkers[a].setVisible(!0):arrayMarkers[a].setVisible(!1)}},this)}var arrayLocations=[{name:"Dodger Stadium",wikiData:"",mapLoc:{lat:34.074,lng:-118.24}},{name:"Walt Disney Concert Hall",wikiData:"",mapLoc:{lat:34.055,lng:-118.25}},{name:"Staples Center",wikiData:"",mapLoc:{lat:34.043,lng:-118.267}},{name:"La Brea Tar Pits",wikiData:"",mapLoc:{lat:34.063,lng:-118.356}},{name:"Bradbury Building",wikiData:"",mapLoc:{lat:34.051,lng:-118.248}},{name:"Hollywood Sign",wikiData:"",mapLoc:{lat:34.134,lng:-118.321}}],infowindow,map,arrayMarkers=[];ko.applyBindings(new AppViewModel),window.addEventListener("load",initMap);